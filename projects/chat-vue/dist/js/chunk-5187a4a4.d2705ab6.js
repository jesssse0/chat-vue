(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5187a4a4"],{"4c42":function(e,t,i){"use strict";i("79ec")},5022:function(e,t,i){"use strict";i("5cc3")},"5a3a":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"form-container"},[i("h3",{staticClass:"title"},[e._v("领取车主福利")]),i("div",{staticClass:"form-wrapper"},[i("div",{staticClass:"form-cell"},[i("div",{staticClass:"form-cell-label"},[e._v("手机号码")]),i("div",{staticClass:"form-cell-content"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.mobile,expression:"mobile"}],attrs:{type:"tel",placeholder:"请输入手机号",maxlength:"11"},domProps:{value:e.mobile},on:{keyup:e.onMobileChange,blur:e.onMobileBlur,focus:e.onMobileFocus,input:function(t){t.target.composing||(e.mobile=t.target.value)}}})]),i("div",{staticClass:"form-cell-ft"},[i("van-popover",{attrs:{theme:"dark",trigger:"click",placement:"top-end",offset:[21,15]},scopedSlots:e._u([{key:"reference",fn:function(){return[i("i",{staticClass:"icon-tips"})]},proxy:!0}]),model:{value:e.showPopover,callback:function(t){e.showPopover=t},expression:"showPopover"}},[i("div",{staticClass:"encrypt-tip"},[e._v(" 手机号加密处理 "),i("i",{staticClass:"icon-close-popover",on:{click:function(t){e.showPopover=!1}}})])]),i("i",{staticClass:"icon-cancel",on:{click:e.onClearMobile}})],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowVerifyCode,expression:"isShowVerifyCode"}],staticClass:"form-cell"},[i("div",{staticClass:"form-cell-label"},[e._v("验证码")]),i("div",{staticClass:"form-cell-content"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.verifyCode,expression:"verifyCode"}],attrs:{type:"tel",placeholder:"请输入验证码",maxlength:"6"},domProps:{value:e.verifyCode},on:{keyup:e.onVerifyCodeChange,blur:e.onVerifyCodeBlur,input:function(t){t.target.composing||(e.verifyCode=t.target.value)}}})]),i("div",{staticClass:"form-cell-ft"},[i("div",{directives:[{name:"throttle",rawName:"v-throttle",value:e.getVerifyCode,expression:"getVerifyCode"}],staticClass:"btn-get-code",class:{disabled:!e.verifiable}},[e._v(" "+e._s(e.verifyBtnText)+" ")])])])]),e.couponImg?i("img",{staticClass:"display-coupon",attrs:{src:e.couponImg,alt:""}}):e._e(),i("div",{staticClass:"btn-wrapper"},[i("div",{directives:[{name:"throttle",rawName:"v-throttle",value:e.verifyParams,expression:"verifyParams"}],staticClass:"btn btn-use"},[e._v(e._s(e.submitText))]),i("label",{staticClass:"user-policy"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.privatePolicy,expression:"privatePolicy"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.privatePolicy)?e._i(e.privatePolicy,null)>-1:e.privatePolicy},on:{change:function(t){var i=e.privatePolicy,o=t.target,a=!!o.checked;if(Array.isArray(i)){var r=null,s=e._i(i,r);o.checked?s<0&&(e.privatePolicy=i.concat([r])):s>-1&&(e.privatePolicy=i.slice(0,s).concat(i.slice(s+1)))}else e.privatePolicy=a}}}),i("span",{staticClass:"icon-check"}),i("div",{staticClass:"policy-text"},[e._v(" 已阅读并同意"),i("a",{on:{click:function(t){return t.preventDefault(),e.openProtocol("personal")}}},[e._v("《个人信息保护说明》")]),e._v("和"),i("a",{on:{click:function(t){return t.preventDefault(),e.openProtocol("privacy")}}},[e._v("《汽车之家隐私政策》")])])])])])},a=[],r=i("c7eb"),s=i("1da1"),n=i("3835"),c=i("ade3"),l=(i("d82d"),i("7278")),u=(i("b0c0"),i("ac1f"),i("5319"),i("00b4"),i("b96e")),v=i("4b5a"),p=i("b0ea"),f=i("ed08"),d=i("52a3"),m={name:"Form",components:Object(c["a"])({},l["a"].name,l["a"]),props:{userInfo:{type:Object,default:function(){return{isLogin:!1,userMobile:""}}},activityInfo:{type:Object,default:function(){return{}},required:!0}},data:function(){return{mobile:"",mobileCopy:"",verifyCode:"",lastSecond:60,verifyBtnText:"获取验证码",verifiable:!0,privatePolicy:!1,showPopover:!1,isAutoApp:this.CfwEnvService.isAutoApp()}},computed:{userMobile:function(){return this.userInfo.userMobile},isShowVerifyCode:function(){return!this.userMobile||this.userMobile!==this.mobileCopy},submitText:function(){var e=this.activityInfo.submitText,t=void 0===e?"立即领取":e;return t},couponImg:function(){var e=this.activityInfo.couponImg;if(e=Object(d["b"])(e)?JSON.parse(e):"",Array.isArray(e)&&e.length>0){var t=e,i=Object(n["a"])(t,1);e=i[0]}return e}},watch:{isShowVerifyCode:function(e){e||(this.verifyCode="")},userMobile:{handler:function(e){console.log("执行这里初始化手机号"),this.mobile=e.replace(/(\d{3})\d{4}(\d{4})/g,"$1****$2"),this.mobileCopy=e},immediate:!0}},created:function(){},methods:{openProtocol:function(e){this.CfwEnvService.open(p["b"][e])},verifyParams:function(){f["a"].pvClick.call(this,u["q"]),this.mobileCopy?/1[3-9]\d{9}/g.test(this.mobileCopy)?!this.isShowVerifyCode||this.verifyCode?this.privatePolicy?this.$emit("take-coupon",{mobile:this.mobileCopy,mobileCode:this.verifyCode}):this.$toast("请阅读并同意协议"):this.$toast("请输入验证码"):this.$toast("请输入正确的手机号"):this.$toast("请输入手机号")},getVerifyCode:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){var i,o,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.verifiable){t.next=2;break}return t.abrupt("return",!1);case 2:return e.verifiable=!1,t.prev=3,t.next=6,Object(v["g"])({mobile:e.mobileCopy});case 6:i=t.sent,o=i.returncode,a=i.message,0===o?(e.verifyBtnText="60s",e.countDown()):(e.verifiable=!0,e.$toast(a||"获取验证码失败，请稍后处理")),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](3),e.verifiable=!0,e.$toast(t.t0.message||"获取验证码失败，请稍后处理");case 16:return t.abrupt("return",!0);case 17:case"end":return t.stop()}}),t,null,[[3,12]])})))()},countDown:function(){var e=this;setTimeout((function(){e.lastSecond-=1,e.lastSecond>0?(e.verifyBtnText="".concat(e.lastSecond,"s"),e.countDown()):(e.verifiable=!0,e.verifyBtnText="重新获取",e.lastSecond=60)}),1e3)},onVerifyCodeChange:function(e){e.target.value=e.target.value.replace(/[^\d]/g,"")},onVerifyCodeBlur:function(){f["a"].pvClick.call(this,u["n"])},onMobileChange:function(e){e.target.value=e.target.value.replace(/[^\d]/g,""),this.mobileCopy=e.target.value},onMobileBlur:function(){11===this.mobileCopy.length&&(this.mobile=this.mobileCopy.replace(/(\d{3})\d{4}(\d{4})/g,"$1****$2"))},onMobileFocus:function(){f["a"].pvClick.call(this,u["p"]),this.mobile=this.mobileCopy},onClearMobile:function(){this.mobile="",this.mobileCopy=""}}},b=m,h=(i("5022"),i("4c42"),i("2877")),y=Object(h["a"])(b,o,a,!1,null,"3c25e61b",null);t["default"]=y.exports},"5cc3":function(e,t,i){},"79ec":function(e,t,i){}}]);